<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/feather-icons"></script>
  </head>
  <body>
    <div class="container">
      <div class="navbar">
        <h1>
          <img src="img/pp1.jpg" alt="Fitrian Mubarok" class="profile" />Rian
          Mubarok
          <svg
            stroke="currentColor"
            fill="#60A5FA"
            stroke-width="0"
            viewBox="0 0 24 24"
            class="text-blue-400"
            height="18"
            width="18"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path fill="none" d="M0 0h24v24H0z"></path>
            <path
              d="M23 12l-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72l-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"
            ></path>
          </svg>
        </h1>
        <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
        <!-- Hamburger icon -->
        <ul id="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="#">Projects</a></li>
          <li><a href="#">Guestbook</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>

      <div class="hero">
        <!-- <img src="ian.jpg" /> -->
      </div>
      <div class="content cf">
        <div class="main">
          <h2>Hello, I'm Rian <span class="wave">ðŸ‘‹</span></h2>
          <p class="penulis">Based in Jepara, Indonesia</p>
          <p>
            I am an informatics engineering student with big dreams, high
            curiosity, and a passion for continuous learning. I thrive on
            solving complex problems through technology, always seeking
            innovative solutions and new challenges. My ambition drives me to
            stay at the cutting edge of the latest technological trends, and Iâ€™m
            dedicated to expanding my knowledge while contributing to impactful
            projects that make a difference in the world.
          </p>
          <br />
          <hr />
          <br />
          <h2>My Skills</h2>
          <div class="skills-section">
            <div class="skill">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                class="bi bi-bezier"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M0 10.5A1.5 1.5 0 0 1 1.5 9h1A1.5 1.5 0 0 1 4 10.5v1A1.5 1.5 0 0 1 2.5 13h-1A1.5 1.5 0 0 1 0 11.5zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm10.5.5A1.5 1.5 0 0 1 13.5 9h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM6 4.5A1.5 1.5 0 0 1 7.5 3h1A1.5 1.5 0 0 1 10 4.5v1A1.5 1.5 0 0 1 8.5 7h-1A1.5 1.5 0 0 1 6 5.5zM7.5 4a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"
                />
                <path
                  d="M6 4.5H1.866a1 1 0 1 0 0 1h2.668A6.52 6.52 0 0 0 1.814 9H2.5q.186 0 .358.043a5.52 5.52 0 0 1 3.185-3.185A1.5 1.5 0 0 1 6 5.5zm3.957 1.358A1.5 1.5 0 0 0 10 5.5v-1h4.134a1 1 0 1 1 0 1h-2.668a6.52 6.52 0 0 1 2.72 3.5H13.5q-.185 0-.358.043a5.52 5.52 0 0 0-3.185-3.185"
                />
              </svg>
              <span>Graphic Design</span>
            </div>
            <div class="skill">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                class="bi bi-pencil-square"
                viewBox="0 0 16 16"
              >
                <path
                  d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"
                />
                <path
                  fill-rule="evenodd"
                  d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"
                />
              </svg>
              <span>Web Design & UI</span>
            </div>
            <div class="skill">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                class="bi bi-gear"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"
                />
                <path
                  d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"
                />
              </svg>
              <span>Web Development</span>
            </div>
          </div>
          <br />

          <br />
          <h2>Latest Articles</h2>
          <br />
          <div class="article-container">
            <a href="#" class="article-link">
              <div class="article-card">
                <div class="img-placeholder">
                  <img src="img/art1.jpg" alt="Article image" />
                  <div class="read-more-overlay">Read more...</div>
                </div>
                <div class="article-content">
                  <span class="tags">#Markdown #WordPress</span>
                  <h3>How to Get Markdown Response from WordPress API</h3>
                  <p class="date">March 15, 2024</p>
                  <p>
                    Integrating Markdown functionality into WordPress can
                    significantly enhance your content creation...
                  </p>
                  <p class="views">687 views Â· 3 mins read</p>
                </div>
              </div>
            </a>

            <a href="#" class="article-link">
              <div class="article-card">
                <div class="img-placeholder">
                  <img src="img/art2.jpg" alt="Article image" />
                  <div class="read-more-overlay">Read more...</div>
                </div>
                <div class="article-content">
                  <span class="tags">#Javascript #Storage</span>
                  <h3>
                    Web Storage: localStorage, sessionStorage, and Cookies
                  </h3>
                  <p class="date">November 13, 2023</p>
                  <p>
                    When it comes to building cool stuff on the web, managing
                    data is like having superpowers...
                  </p>
                  <p class="views">564 views Â· 4 mins read</p>
                </div>
              </div>
            </a>

            <a href="#" class="article-link">
              <div class="article-card">
                <div class="img-placeholder">
                  <img src="img/art3.jpg" alt="Article image" />
                  <div class="read-more-overlay">Read more...</div>
                </div>
                <div class="article-content">
                  <span class="tags">#React #Typescript</span>
                  <h3>
                    React with TypeScript: 10 Pro Tips to Supercharge Your Code
                  </h3>
                  <p class="date">June 23, 2023</p>
                  <p>
                    React and TypeScript are a powerful combination for building
                    robust and scalable web applications...
                  </p>
                  <p class="views">1659 views Â· 3 mins read</p>
                </div>
              </div>
            </a>
          </div>
          <br />
          <hr />
          <br />
          <h2>Send me a message</h2>
          <br />
          <div class="contact-form">
            <form id="myForm">
              <table border="0" cellspacing="0" cellpadding="5">
                <tr>
                  <td>
                    <input
                      type="text"
                      id="name"
                      name="name"
                      required
                      placeholder="name*"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      id="email"
                      name="email"
                      required
                      placeholder="phone*"
                      inputmode="numeric"
                      pattern="[0-9]*"
                      minlength="10"
                      autocomplete="off"
                    />
                  </td>
                </tr>
                <tr>
                  <td colspan="2">
                    <textarea
                      id="message"
                      name="message"
                      required
                      placeholder="message*"
                    ></textarea>
                  </td>
                </tr>
                <tr>
                  <td colspan="2">
                    <button type="submit">Send Message</button>
                  </td>
                </tr>
              </table>
              <p class="response-time">
                Avg. response: 1-2 Hours (Working Hours, GMT+7)
              </p>
            </form>

            <!-- Popup pesan berhasil -->
            <div id="successPopup">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                class="bi bi-check-circle-fill"
                viewBox="0 0 16 16"
                margin-top="10"
              >
                <path
                  d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
                />
              </svg>
              Pesan berhasil dikirim!
            </div>
          </div>
          <br />
        </div>
      </div>
      <div class="chat-icon" id="chatIcon">ðŸ’¬</div>

      <div class="chat-popup" id="chatPopup">
        <div class="chat-popup-header">Chat AI</div>
        <div class="chat-popup-body" id="chatBody">
          <p>AI: Hi! How can I assist you today?</p>
        </div>
        <div class="chat-popup-footer">
          <input
            type="text"
            id="chatInput"
            placeholder="Type your message..."
          />
          <button onclick="sendMessage()">
            <i data-feather="send" color="white" width="30"></i>
          </button>
        </div>
        <!-- Resizer for resizing the popup -->
        <div class="resizer" id="resizer"></div>
      </div>
      <!-- <div class="footer">
        <p class="copy">Copyright 2024. Fitrian Mubarok</p>
      </div> -->
    </div>
    <script>
      function toggleMenu() {
        const menu = document.getElementById("nav-links");
        menu.classList.toggle("show");
      }
      // Dapatkan semua elemen link di dalam nav-links
      const navLinks = document.querySelectorAll("#nav-links li a");

      // Dapatkan URL halaman saat ini
      const currentUrl = window.location.href;

      // Loop setiap link dan cek apakah URL cocok dengan URL saat ini
      navLinks.forEach((link) => {
        if (link.href === currentUrl) {
          link.classList.add("active"); // Tambahkan kelas 'active' ke link aktif
        }
      });
      const chatIcon = document.getElementById("chatIcon");
      const chatPopup = document.getElementById("chatPopup");
      const chatBody = document.getElementById("chatBody");
      const chatInput = document.getElementById("chatInput");
      const resizer = document.getElementById("resizer");

      // Toggle the chat popup visibility
      chatIcon.addEventListener("click", () => {
        chatPopup.style.display =
          chatPopup.style.display === "flex" ? "none" : "flex";
      });

      // Make the popup resizable
      resizer.addEventListener("mousedown", function (e) {
        e.preventDefault();
        window.addEventListener("mousemove", resize);
        window.addEventListener("mouseup", stopResize);
      });

      function resize(e) {
        const newWidth = chatPopup.offsetWidth - e.movementX;
        const newHeight = chatPopup.offsetHeight - e.movementY;

        // Membatasi ukuran popup agar tidak keluar dari layar
        if (newWidth > 200 && newWidth < window.innerWidth * 0.9) {
          chatPopup.style.width = `${newWidth}px`;
        }
        if (newHeight > 200 && newHeight < window.innerHeight * 0.9) {
          chatPopup.style.height = `${newHeight}px`;
        }
      }

      function stopResize() {
        window.removeEventListener("mousemove", resize);
        window.removeEventListener("mouseup", stopResize);
      }

      // Function to send message to AI
      async function sendMessage() {
        const message = chatInput.value;
        if (message.trim() === "") return;

        // Add user message to chat body
        const userMessage = document.createElement("p");
        userMessage.textContent = `You: ${message}`;
        chatBody.appendChild(userMessage);
        chatInput.value = "";
        chatBody.scrollTop = chatBody.scrollHeight;
        let loadingMessage;

        try {
          // Add loading message
          loadingMessage = document.createElement("p");
          loadingMessage.textContent = "AI: Typing...";
          chatBody.appendChild(loadingMessage);

          // Remove leading slash for the query
          const query = message.startsWith("/")
            ? message.slice(1).trim()
            : message.trim();

          if (query.length > 0) {
            // Create a timeout promise
            const timeoutPromise = new Promise((_, reject) =>
              setTimeout(() => reject(new Error("timeout")), 10000)
            );

            // Call the new AI API
            const fetchPromise = fetch(
              `https://api.ryzendesu.vip/api/ai/gemini?text=${encodeURIComponent(
                query
              )}`,
              {
                headers: {
                  accept: "application/json",
                },
              }
            );

            // Use Promise.race to handle timeout
            const response = await Promise.race([fetchPromise, timeoutPromise]);

            const data = await response.json();
            let aiResponse = data.answer;

            // Remove loading message and add AI response
            loadingMessage.remove();
            const aiMessage = document.createElement("p");
            aiMessage.textContent = `AI: ${aiResponse}`;
            chatBody.appendChild(aiMessage);
            chatBody.scrollTop = chatBody.scrollHeight;
          } else {
            loadingMessage.textContent = "AI: Please enter a valid query.";
          }
        } catch (error) {
          // Check if the error is a timeout error
          if (loadingMessage) {
            // Ensure loadingMessage exists before trying to update it
            if (error.message === "timeout") {
              loadingMessage.textContent =
                "Sorry, the server is busy right now, please try again later.";
            } else {
              console.error("Error fetching AI response:", error);
              loadingMessage.textContent = "AI: Error, please try again later.";
            }
          }
        }
      }

      chatInput.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          // Cegah aksi default agar tidak menambah baris baru di input
          event.preventDefault();

          // Panggil fungsi sendMessage untuk mengirim pesan
          sendMessage();
        }
      });
      document
        .getElementById("myForm")
        .addEventListener("submit", function (e) {
          e.preventDefault(); // Mencegah form dari reload halaman

          // Ambil nilai dari form
          var name = document.getElementById("name").value;
          var email = document.getElementById("email").value;
          var message = document.getElementById("message").value;

          // Buat objek form data
          var formData = new FormData();
          formData.append("name", name);
          formData.append("email", email);
          formData.append("message", message);

          // Kirim data menggunakan Fetch API (AJAX)
          fetch(
            "https://script.google.com/macros/s/AKfycbxos2rHk5c5p_JhHCJiarR4fGaR9k7xZ9kQhCRb27nhzAg_nEBhvFcF3vjei3VddCm6/exec",
            {
              method: "POST",
              body: formData,
            }
          )
            .then((response) => response.text())
            .then((data) => {
              // Tampilkan popup pesan berhasil
              var successPopup = document.getElementById("successPopup");
              successPopup.style.display = "block";

              // Sembunyikan popup setelah 3 detik
              setTimeout(function () {
                successPopup.style.display = "none";
              }, 3000);

              // Reset form setelah data berhasil terkirim
              document.getElementById("myForm").reset();
            })
            .catch((error) => console.error("Error:", error));
        });
    </script>
    <script>
      feather.replace();
    </script>
  </body>
</html>
